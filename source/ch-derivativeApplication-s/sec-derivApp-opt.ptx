<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-derivApp-opt" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Optimization Problems</title>

  <objectives>
    <ul>
      <li>Translate a word problem into a function to be maximized or minimized.</li>
      <li>Identify controlling variables, constraints, and the target quantity in an optimization setting.</li>
      <li>Determine a relevant domain based on physical or geometric restrictions.</li>
      <li>Find absolute maxima and minima using critical points and endpoint checks.</li>
      <li>Interpret an optimal solution in context and check that it is physically reasonable.</li>
    </ul>
  </objectives>

  <p>
    In many applications, we are not just interested in computing derivatives.
    Instead, we use derivatives as a tool to make the best possible choice:
    the largest area, the smallest cost, the least time, or the greatest profit.
    These sorts of real-world problems are called <term>optimization problems</term>.
  </p>

  <subsection xml:id="ssec-opt-motivating-example">
    <title>Motivating Example and Overall Technique</title>


    <example xml:id="ex-opt-rectangle">
      <statement>
        <p>
          Suppose we have <m>40</m> meters of fencing to enclose a rectangular area.
           What dimensions maximize the area?
        </p>

        <ol marker="(a)">
          <li>
            <p>
              Click the Desmos model below to experiment with different rectangles and get a sense of the problem and for what the answer should be. 
            </p>
               <url href="https://www.desmos.com/calculator/6o2oojvp14">
      <figure>
<caption>
  A GIF showing various rectangles with a perimeter of 40 meters. As the dimensions of the rectangle change, the area is calculated and displayed. 
  The animation illustrates how the area changes for different length and width combinations, 
  helping to visualize the optimization problem and understand which dimensions yield the maximum area.
</caption>
        <image width="100%" source="images/Optimization01.gif">
<shortdescription>
  Animated graph showing rectangles with a perimeter of 40 meters. As the length and width of the rectangle change, the area is calculated and displayed. 
  The animation helps visualize how the area changes for different dimensions, guiding us towards understanding which dimensions maximize the area. 
  It appears that the area is maximized when the rectangle is a square, with both length and width equal to 10 meters.
</shortdescription>
        </image>
      </figure>
  </url>

          </li>
          <li>
            <p>
              Use calculus techniques to find the dimensions of the rectangle of greatest area.
            </p>
          </li>
        </ol> 
      </statement>

      <solution>
        <p> (a) Experimenting with the Desmos model suggests that the rectangle of greatest area is a square with side length 10 meters. 
          We will confirm this using calculus in part (b).</p>
        
        <p> (b) To solve this problem, we first identify the controlling variables, constraints, and target quantity.</p>
          <p> Our target quantity that we are trying to maximize is the area of the rectangle (<m>A=\ell w</m>). 
            The controlling variables are the length <m>\ell</m> and width <m>w</m> of the rectangle. 
            The constraint is that the perimeter must be 40 meters.</p>
            <p> Using the constraint, we can express one variable in terms of the other and write the area as a single-variable function.
        </p>
        <me>\begin{array}{rcl}
          2\ell+2w \amp = \amp 40 \\
          \ell+w \amp = \amp 20 \\
          w \amp = \amp 20-\ell
        \end{array}
        </me>
  <p>         Using this we can express the area as a function of <m>\ell</m>:
  </p> 
        <me>
          A=\ell w=\ell(20-\ell)=20\ell-\ell^2.
        </me>

        <p>
          The physical domain requires <m>\ell\ge 0</m> and <m>w\ge 0</m>, so
          <m>\ell\in[0,20]</m>.
          Now we find the absolute maximum of <m>A(\ell)</m> on <m>[0,20]</m>.
        </p>

        <me>
          A'(\ell)=20-2\ell.
        </me>

        <p>
          The critical point satisfies <m>A'(\ell)=0</m>, so <m>\ell=10</m>.
        </p>
        <p>Since the domain is a closed interval, we can use the Closed Interval Method to check the endpoints and the critical point:</p>

        <me>
          A(0)=0,\qquad A(10)=100,\qquad A(20)=0.
        </me>

        <p>
          So the largest Area value occurs at <m>\ell=10</m> meters.
          Therefore <m>w=20-\ell=10</m> meters. And so we can see from this example that the rectangle of greatest area is a square with side length 10 meters, 
          confirming our initial guess from the Desmos model.
        </p>
      </solution>
    </example>

    
<p>
  Since we are interested in finding absolute extrema, it is helpful that we already have a method for functions defined on a closed interval, as in the previous example.
  However, what happens when the domain is open or unbounded? Up to this point, our techniques in those settings allow us to find only <alert>local extrema</alert>.
  For that reason, the following two results will be especially useful.
</p>


    <theorem xml:id="thm-abs-ext-first-deriv-test">
      <title>First Derivative Test for Absolute Extrema</title>
      <statement>
        <p>
          Suppose that <m>c</m> is the only critical point of a continuous function <m>f</m> on an interval <m>I</m>, then the following hold:
        </p> 
          <ul>
            <li>
              <p>
                If <m>f'(x)\gt 0</m>  for all <m>x\lt c</m> and <m>f'(x)\lt 0</m> for all <m>x\gt c</m>, then <m>f(c)</m> is an absolute maximum of <m>f</m> on <m>I</m>.
              </p>
            </li>
            <li>
              <p>
                If <m>f'(x)\lt 0</m>  for all <m>x\lt c</m> and <m>f'(x)\gt 0</m> for all <m>x\gt c</m>, then <m>f(c)</m> is an absolute minimum of <m>f</m> on <m>I</m>.
              </p>
            </li> 
          </ul> 
      </statement>
    </theorem>

    <theorem xml:id="thm-abs-ext-second-deriv-test">
      <title>Second Derivative Test for Absolute Extrema</title>
      <statement>
        <p>
          Suppose that <m>c</m> is the only critical point of a continuous function <m>f</m> on an interval <m>I</m> such that <m>f'(c)=0</m> , then the following hold:
        </p>
          <ul>
            <li>
              <p>
                If <m>f''(c)\lt 0</m>, then <m>f(c)</m> is an absolute maximum of <m>f</m> on <m>I</m>.
              </p>
            </li>
            <li>
              <p>
                If <m>f''(c)\gt 0</m>, then <m>f(c)</m> is an absolute minimum of <m>f</m> on <m>I</m>.
              </p>
            </li> 
          </ul> 
      </statement>
    </theorem>

    
    <p>Now let's summarize the overall technique for solving optimization problems.</p>



    <algorithm xml:id="strat-optimization-method">
      <title>Technique for Optimization</title>
      <p>
        Most optimization problems follow the same workflow:
      </p>

      <ol>
        <li>
          Draw a labeled picture (if appropriate). Identify the controlling variable(s),
          the constraint(s), and the target quantity you want to maximize or minimize.
        </li>
        <li>
          Write equations that relate the variables using geometry, formulas, or context.
        </li>
        <li>
          Choose one controlling variable as the independent variable and rewrite the target quantity
          as a single-variable function <m>T(x)</m> (in our previous example our target quantity was area). Determine the domain of <m>x</m>.
        </li>
        <li> <p> 
          Find the desired absolute extrema of <m>T(x)</m> on its domain by one of 
          <ul>
            <li>
              <p>
                The <xref ref="strat-extrema">Closed Interval Method</xref> if the domain is a closed interval.  
              </p>
            </li>
            <li>
              <p>
                The <xref ref="thm-abs-ext-first-deriv-test">First Derivative Test for Absolute Extrema</xref> 
                if the domain is open or unbounded and the critical point is the only candidate.
              </p>
            </li>
            <li>
              <p>
                The <xref ref="thm-abs-ext-second-deriv-test">Second Derivative Test for Absolute Extrema</xref> 
                if the domain is open or unbounded and the critical point is the only candidate (and it is difficult to analyze the sign of the first derivative).
              </p>
            </li>
          </ul>
          
        </p> 
        </li>
        <li>
          Interpret your answer in context and check that it makes sense.
        </li>
      </ol>
    </algorithm>

      
<p>And with that we are ready to solve optimization problems! Similar to related rates problems, 
  the key is to practice the technique on a variety of examples so that you can recognize the pattern and apply it efficiently.
</p> 

  </subsection>




  <subsection xml:id="ssec-opt-examples">
    <title>More Examples</title>

    <example xml:id="ex-opt-bucket">
      <statement>
        <p>
          A 10-quart bucket has cylindrical sides and a circular bottom (no top).
          What is the minimum surface area for such a bucket?
        </p>

        <p><em>Hint:</em> 10 quarts is <m>\tfrac{1155}{2}</m> cubic inches.</p>

        <ol marker="(a)">
          <li>
            <p>
              Use the Desmos graphing tool to visualize the situation, the surface area function, and approximate the optimal dimensions.
            </p>
               <url href="https://www.desmos.com/calculator/dqkdsx9x3c">
      <figure>
<caption>
  A GIF showing various cylinders with a fixed volume of 10 quarts. As the radius and height of the cylinder change, the surface area is calculated and displayed.
  The animation helps visualize how the surface area changes for different dimensions, guiding us towards understanding which dimensions minimize the surface area. 
</caption>
        <image width="100%" source="images/Optimization02.gif">
  <shortdescription>
  A GIF showing various cylinders with a fixed volume of 10 quarts. As the radius and height of the cylinder change, the surface area is calculated and displayed.
  The animation helps visualize how the surface area changes for different dimensions, guiding us towards understanding which dimensions minimize the surface area.
  It appears that the surface area is minimized when the radius is about 5.5 inches. At this point the Surface Area is around 300 square inches.
</shortdescription>
        </image>
      </figure>
  </url>
          </li>
          <li>
            <p>
              Find the minimum surface area. What are the dimensions that minimize surface area? Confirm that they minimize surface area.
            </p>
          </li>
        </ol>


      </statement>

      <solution>
        <p>
          The target quantity is the surface area
        </p>

        <me> \begin{array}{rcl}
           S \amp = \amp \text{area of bottom} + \text{area of sides} \\
           S \amp = \amp \pi r^2 + 2\pi rh
           \end{array}
          </me>

        <p>
          The constraint is the volume. Converting 10 quarts to cubic inches gives
          <m>V=\tfrac{1155}{2} \text{in}^3</m>, so
        </p>

        <me>
          V=\pi r^2h=\frac{1155}{2}.
        </me>

        <p>
          Use the constraint to write <m>h</m> in terms of <m>r</m>:
        </p>

        <me>
          h=\frac{1155}{2\pi r^2}.
        </me>

        <p>
          Substitute into <m>S</m> to obtain a single-variable function:
        </p>

        <me>
          S(r)=\pi r^2+2\pi r\left(\frac{1155}{2\pi r^2}\right)
          =\pi r^2+\frac{1155}{r}.
        </me>

        <p>
          The domain is <m>r&gt;0</m>. Differentiate:
        </p>

        <me>
          S'(r)=2\pi r-\frac{1155}{r^2}.
        </me>

        <p>
          Set <m>S'(r)=0</m>:
        </p>

        <me> \begin{array}{rcl}
           2\pi r \amp = \amp \frac{1155}{r^2} \\
           r^3 \amp = \amp \frac{1155}{2\pi} \\
           r \amp = \amp \sqrt[3]{\frac{1155}{2\pi}} \approx 5.69 \text{ in}.
           \end{array}
          </me>

          <remark>
            <p>
              Admittedly a calculator was used to get the 5.69 approximation above. However even without a calculator we can quickly and confidently 
              say this value is between 5 and 6 inches.
            </p>
          </remark>

        <p>
          The second derivative is
        </p>

        <me>
          S''(r)=2\pi+\frac{2310}{r^3}.
        </me>

        <p>
          Since <m>S''(r)&gt;0</m> for all <m>r&gt;0</m>, the critical point is indeed a minimum by the 
          <xref ref="thm-abs-ext-second-deriv-test">Second Derivative Test for Absolute Extrema</xref>.
        </p>





        <p>
          Now we can compute the corresponding height:
        </p>

        <me>\begin{array}{rcl}
          h \amp =\amp \frac{1155}{2\pi r^2}\\
          \amp =\amp \frac{1155}{2\pi\left(\sqrt[3]{\frac{1155}{2\pi}}\right)^2} \\
          \amp =\amp \frac{1155}{2\pi\left(\frac{1155}{2\pi}\right)^{2/3}} \\
          \amp =\amp \frac{1155}{2\pi}\cdot\left(\frac{2\pi}{1155}\right)^{2/3} \\
          \amp =\amp \sqrt[3]{\frac{1155}{2\pi}} \\
        </me>

        <p>
          Since this is the same value as <m>r</m>, we have <m>h=r</m>.
          This yields a bucket that is twice as wide as it is tall.
        </p>

        <p> Now to get the minimum surface area, we can substitute the values of <m>r</m> and <m>h</m> into the surface area function:</p>
        <me>
          \begin{array}{rcl}
          S_{min} \amp = \amp \pi r^2 + 2\pi rh\\
          \amp = \amp \pi\left(\sqrt[3]{\frac{1155}{2\pi}}\right)^2 + 2\pi\left(\sqrt[3]{\frac{1155}{2\pi}}\right)\left(\sqrt[3]{\frac{1155}{2\pi}}\right) \\
          \amp = \amp 3\pi\left(\sqrt[3]{\frac{1155}{2\pi}}\right)^2 \\
          \amp = \amp 3\pi\left(\frac{1155}{2\pi}\right)^{2/3} \approx 300.1
          <remark>
          <p>
            Real buckets are often designed with other priorities besides minimizing material,
            such as stability, ease of carrying, stackability, and manufacturing constraints.
            Optimization models are most useful when we clearly state what is being optimized
            and what is being ignored.
          </p>
        </remark>
      </solution>
    </example>


    <example xml:id="ex-opt-ants">
      <statement>
        <p>
          A line of ants travels from the lower-left corner to the upper-right corner
          of a <m>10</m> cm by <m>10</m> cm square of carpet.
          They may travel along the left or bottom edge at speed <m>1</m> cm/sec,
          and then cut across the carpet at speed <m>\tfrac12</m> cm/sec.
        </p>

        <p>
          Let <m>e</m> be the distance traveled along an edge before entering the carpet.
          Find the value of <m>e</m> that minimizes:
          (a) the total distance traveled, and
          (b) the total travel time.
        </p>
      </statement>

      <solution>
        <p>
          The diagonal segment across the carpet has length <m>c</m>.
          From the right triangle,
        </p>

        <me>
          c^2=10^2+(10-e)^2.
        </me>

        <p>
          Therefore
        </p>

        <me>
          c=\sqrt{200-20e+e^2}.
        </me>

        <p>
          The domain is <m>e\in[0,10]</m>.
          The total distance is
        </p>

        <me>
          L(e)=e+c=e+\sqrt{200-20e+e^2}.
        </me>

        <p>
          The total time is distance divided by speed.
          Along the edge the speed is <m>1</m>, so time is <m>e</m>.
          Across the carpet the speed is <m>\tfrac12</m>, so time is <m>\frac{c}{1/2}=2c</m>.
          Thus
        </p>

        <me>
          T(e)=e+2\sqrt{200-20e+e^2}.
        </me>

        <p>
          <alert>(a) Minimize distance.</alert>
          Differentiate:
        </p>

        <me>
          L'(e)=1+\frac{1}{2}(200-20e+e^2)^{-1/2}(2e-20)
          =1-\frac{10-e}{\sqrt{200-20e+e^2}}.
        </me>

        <p>
          Solving <m>L'(e)=0</m> would require
          <m>\sqrt{200-20e+e^2}=10-e</m>. Squaring both sides gives
          <m>200-20e+e^2=(10-e)^2=100-20e+e^2</m>, which reduces to <m>200=100</m>,
          an impossibility. Therefore there are no critical points in <m>(0,10)</m>,
          so the minimum occurs at an endpoint.
        </p>

        <me>
          L(0)=10\sqrt{2},\qquad L(10)=20.
        </me>

        <p>
          Since <m>10\sqrt2&lt;20</m>, the minimum distance occurs at <m>e=0</m>.
          In other words, the straight diagonal is the shortest path.
        </p>

        <p>
          <alert>(b) Minimize time.</alert>
          Differentiate:
        </p>

        <me>
          T'(e)=1+(2)\cdot\frac{1}{2}(200-20e+e^2)^{-1/2}(2e-20)
          =1-\frac{2(10-e)}{\sqrt{200-20e+e^2}}.
        </me>

        <p>
          Set <m>T'(e)=0</m>:
        </p>

        <me>
          \sqrt{200-20e+e^2}=20-2e.
        </me>

        <p>
          Square both sides and simplify:
        </p>

        <me>
          200-20e+e^2=(20-2e)^2
          \quad\Longrightarrow\quad
          3e^2-60e+200=0.
        </me>

        <p>
          Apply the quadratic formula:
        </p>

        <me>
          e=\frac{60\pm\sqrt{60^2-4(3)(200)}}{2(3)}
          =10\pm\frac{10}{3}\sqrt{3}.
        </me>

        <p>
          Only <m>e=10-\frac{10}{3}\sqrt{3}</m> lies in <m>[0,10]</m>, so it is our only critical point.
          Compare to the endpoints:
        </p>

        <me>
          T(0)=20\sqrt2,\qquad T(10)=30,\qquad
          T\!\left(10-\frac{10}{3}\sqrt3\right)=10+10\sqrt3.
        </me>

        <p>
          Since <m>10+10\sqrt3</m> is the smallest of these values, the minimum time occurs at
          <m>\displaystyle e=10-\frac{10}{3}\sqrt3\approx 4.2</m>.
        </p>

        <remark>
          <p>
            Minimizing distance and minimizing time are different problems because the speed changes.
            The ants save time by traveling partway along the faster edge and then cutting across the slower carpet.
          </p>
        </remark>
      </solution>
    </example>

    

    <example xml:id="ex-opt-profit">
      <statement>
        <p>
          A company produces a product for <m>\$10</m> per item and sells it for <m>s</m> dollars per item.
          Market demand is modeled by <m>m(s)=100-s</m>, meaning that when the price is <m>s</m>,
          the number of items sold is <m>100-s</m>.
        </p>
        <p>
          What price <m>s</m> maximizes total profit?
        </p>
      </statement>

      <solution>
        <p>
          The profit per item is <m>s-10</m>, and the number sold is <m>100-s</m>.
          Therefore total profit is
        </p>

        <me>
          P(s)=(100-s)(s-10)=-1000+110s-s^2.
        </me>

        <p>
          The relevant domain is <m>s\in[10,100]</m>, since selling below cost is not sensible here,
          and demand reaches zero at <m>s=100</m>.
        </p>

        <p>
          Differentiate:
        </p>

        <me>
          P'(s)=110-2s.
        </me>

        <p>
          The critical point satisfies <m>P'(s)=0</m>, so <m>s=55</m>.
          Check the endpoints:
        </p>

        <me>
          P(10)=0,\qquad P(55)=2025,\qquad P(100)=0.
        </me>

        <p>
          The maximum profit occurs at <m>s=55</m>.
          The most profitable selling price is <m>\$55</m> per item.
        </p>
      </solution>
    </example>
  </subsection>

  <subsection xml:id="additional-worked-examples-opt">
    <title>Additional Worked-Out Examples</title>

    <p>
      To keep this section at a reasonable length, we include only a few representative examples directly in the text.
      If you find yourself stuck on a homework problem, or if you are studying before a quiz or exam, additional
      fully worked-out examples are available in:
      <alert>
        <xref ref="subsec-derivApp-opt">
          Additional Examples for Optimization Problems
        </xref>
      </alert>
    </p>
  </subsection>

  <exercises xml:id="exercises-optimization">
    <title>Practice / Study Problems</title>

    <exercisegroup>
      <title>Some True/False Problems</title>
    <introduction>
      <p>
        Determine whether each statement is true or false and briefly justify your reasoning.
      </p>
    </introduction>

      <exercise xml:id="tf-opt-01">
        <statement>
          <p>
            If <m>T'(c)=0</m>, then <m>x=c</m> must give an absolute maximum or minimum of <m>T</m>.
          </p>
        </statement>
        <solution>
          <p>
            <emph>False.</emph> A critical point is only a candidate. The absolute extremum could occur at an endpoint,
            and some critical points are neither maxima nor minima.
          </p>
        </solution>
      </exercise>

      <exercise xml:id="tf-opt-02">
        <statement>
          <p>
            In an optimization problem on a closed interval, it is always necessary to check endpoints.
          </p>
        </statement>
        <solution>
          <p>
            <emph>True.</emph> Absolute maxima and minima can occur at endpoints, so they must be included as candidates.
          </p>
        </solution>
      </exercise>

      <exercise xml:id="tf-opt-03">
        <statement>
          <p>
            If the domain is <m>(0,\infty)</m>, then an absolute minimum cannot exist.
          </p>
        </statement>
        <solution>
          <p>
            <emph>False.</emph> An absolute minimum may exist on an open or unbounded domain,
            but we must justify it by analyzing critical points and limits at the boundaries.
          </p>
        </solution>
      </exercise>
    </exercisegroup>

    <exercisegroup>
      <title>Algebraic and Applied Problems</title>

      <exercise xml:id="prob-opt-rect-48">
        <statement>
          <p>
            You have 48 meters of fencing to enclose a rectangle.
            What dimensions maximize area, and what is the maximum area?
          </p>
        </statement>
      </exercise>

      <exercise xml:id="prob-opt-open-top-box">
        <statement>
          <p>
            An open-top box is made by cutting equal squares of side length <m>x</m> from the corners of a
            <m>20</m> by <m>30</m> rectangle and folding up the sides.
            Write the volume as a function of <m>x</m> and determine the value of <m>x</m> that maximizes the volume.
          </p>
        </statement>
      </exercise>

      <exercise xml:id="prob-opt-profit-new">
        <statement>
          <p>
            A company has cost <m>\$12</m> per item and demand <m>m(s)=160-2s</m>.
            Write a profit function <m>P(s)</m> and determine the price <m>s</m> that maximizes profit.
          </p>
        </statement>
      </exercise>

      <exercise xml:id="prob-opt-time-speed-change">
        <statement>
          <p>
            A person walks along a sidewalk at <m>4</m> m/s and then crosses a field at <m>2</m> m/s.
            Sketch a diagram and set up a time function similar to the ants problem.
            Explain what your independent variable is and what domain it must satisfy.
          </p>
        </statement>
      </exercise>

    </exercisegroup>
  </exercises>

</section>